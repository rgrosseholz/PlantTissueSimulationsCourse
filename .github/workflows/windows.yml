New chat
GitHub workflows
/

I am setting up an automated workflow on github (the file is here: https://github.com/rgrosseholz/PlantTissueSimulationsCourse/actions/runs/19102005840/workflow) Can you help me with getting this to run?

I'll help you troubleshoot your GitHub Actions workflow. Let me fetch the workflow file to see what's going on.

Now let me check the actual workflow run to see what errors occurred:

I can see your workflow file! Based on the configuration, here are some common issues and suggestions to help you get it running:
Potential Issues & Solutions:
1. MinGW Path Issue

The workflow adds MinGW to PATH, but the path format might need adjustment. Try this instead:
yaml

- name: Add MinGW to PATH
  run: echo "${{ runner.temp }}\Qt\Tools\mingw810_64\bin" | Out-File -FilePath $env:GITHUB_PATH -Encoding utf8 -Append
  shell: pwsh

2. Qt Installation Path

The Qt tools installation might not be placing MinGW where expected. Try updating the Qt setup step:
yaml

- name: Set up Qt
  uses: jurplel/install-qt-action@v3
  with:
    version: '5.15.2'
    host: 'windows'
    target: 'desktop'
    arch: 'win64_mingw81'
    tools: 'tools_mingw81,qt.tools.mingw810'

3. Check for Build Output

Make sure your VirtualLeaf.pro file is configured to output to the bin/ directory that you're trying to package.
4. Release Job Token

The release job uses ${{ github.token }} - ensure it has write permissions (which you've already set).

Could you share:

    What specific error message you're getting when the workflow runs?
    Which step is failing?

This will help me give you more targeted solutions!

Can you give me the updated file with the first fix?

View your updated workflow file

The key change is in the "Add MinGW to PATH" step - I changed the forward slashes to backslashes: ${{ runner.temp }}\Qt\Tools\mingw810_64\bin instead of ${{ runner.temp }}/Qt/Tools/mingw810_64/bin.

This should be placed in your repository at .github/workflows/windows.yml.
Windows
YML 

The workflow for linux already works (https://github.com/rgrosseholz/PlantTissueSimulationsCourse/actions/runs/19102138925/workflow). Does that help with identifying the issue?

Great! Looking at your working Linux workflow, I can see the pattern. The key difference is that the Linux workflow builds everything in one command line:
bash

cd ${{ github.workspace }}/src;qmake VirtualLeaf.pro;make -f Makefile

The Windows workflow is splitting this across multiple steps, which might be causing issues with the working directory. Let me create an updated version that follows the Linux pattern more closely:

View your updated workflow file

The main changes:

    Combined the qmake and make steps - Just like your Linux workflow does it all in one line
    Used explicit workspace path - ${{ github.workspace }}/src instead of relying on cd to persist between steps
    Used semicolons to chain commands - Following the same pattern as your working Linux workflow

This should work much better since it mirrors your successful Linux approach!
Windows
YML 

Unfortunately, I run into an issue:

I can help! But I need to see what error you're encountering. Could you share:

    The error message from the GitHub Actions run
    Which step is failing (Verify MinGW, Build Project, etc.)
    Any relevant log output

You can either:

    Copy/paste the error message here
    Share the link to the failed run (if it's publicly accessible)
    Take a screenshot of the error

This will help me pinpoint exactly what's going wrong!

Run cd D:\a\PlantTissueSimulationsCourse\PlantTissueSimulationsCourse/src;qmake VirtualLeaf.pro;mingw32-make
Project ERROR: Cannot run compiler 'g++'. Output:
===================
===================
Maybe you forgot to setup the environment?
mingw32-make: *** No targets specified and no makefile found. Stop.
Error: Process completed with exit code 1.

Ah, I see the issue! The g++ compiler isn't being found even though MinGW should be installed. The problem is likely that the PATH isn't being set correctly, or the commands need to run in the same shell session. Let me fix this:

Wait, let me also check if the PATH issue might be with how we're setting it. Let me add better debugging and try a different approach:

View your updated workflow file

The key changes:

    Added immediate PATH update in the same step where we write to GITHUB_PATH
    Added debugging to show the actual PATH and location of g++
    Reverted to multi-line commands in PowerShell (using | syntax) since semicolons don't work the same way in PowerShell as in bash

This should help us see exactly where MinGW is being installed and ensure the PATH is correct for subsequent steps!
Windows
YML 

It is still failing in the build project step:
Project ERROR: Cannot run compiler 'g++'. Output:
===================
===================
Maybe you forgot to setup the environment?
mingw32-make: *** No targets specified and no makefile found. Stop.
Error: Process completed with exit code 1.

The issue is that the PATH update in one step doesn't persist to the next step in GitHub Actions. Even though we write to $GITHUB_PATH, it only takes effect in subsequent steps. Let me fix this by ensuring the PATH is set in the same step where we build:

View your updated workflow file

The key fix: I'm setting the PATH inside the Build Project step itself, so that when qmake runs, it can find g++. This ensures the environment is set up correctly in the same shell session where the build commands execute.

Try this version - it should now be able to find the compiler!
Windows
YML 


Windows Â· YML
name: VirtualLeaf compile clean and package for windows
run-name: ${{ github.actor }} is testing on windows
on:
  push:
    branches:
      - main
  pull_request:
  release:
    types: [created]

permissions:
  contents: write

jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Qt
        uses: jurplel/install-qt-action@v3
        with:
          version: '5.15.2'
          host: 'windows'
          target: 'desktop'
          arch: 'win64_mingw81'
          tools: 'tools_mingw,qt.tools.win64_mingw810'

      - name: Add MinGW to PATH
        run: |
          echo "${{ runner.temp }}\Qt\Tools\mingw810_64\bin" | Out-File -FilePath $env:GITHUB_PATH -Encoding utf8 -Append
          $env:PATH = "${{ runner.temp }}\Qt\Tools\mingw810_64\bin;$env:PATH"
          echo "PATH updated"
        shell: pwsh

      - name: Verify MinGW installation
        run: |
          echo "Current PATH: $env:PATH"
          where.exe g++
          g++ --version
          mingw32-make --version
          qmake --version

      - name: Build Project
        run: |
          $env:PATH = "${{ runner.temp }}\Qt\Tools\mingw810_64\bin;$env:PATH"
          cd src
          qmake VirtualLeaf.pro
          mingw32-make
        shell: pwsh

      - name: Package Project
        uses: actions/upload-artifact@v4
        with:
          name: VirtualLeaf-windows-x64
          path: |
            ${{ github.workspace }}/bin/**/*
            ${{ github.workspace }}/data/**/*

  release:
    runs-on: ubuntu-latest
    needs: build
    if: github.event_name == 'release' && github.event.action == 'created'
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - uses: actions/download-artifact@v4

      - name: Display structure of downloaded files
        run: ls -R ${{ github.workspace }}

      - name: 'ðŸ“¦ Package windows x64'
        run: |
          zip -r VirtualLeaf-windows-x64.zip VirtualLeaf-windows-x64
          gh release upload ${{ github.event.release.tag_name }} VirtualLeaf-windows-x64.zip
        env:
          GITHUB_TOKEN: ${{ github.token }}
        shell: bash

